<!doctype html>
<html lang="id" class="scroll-smooth">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>D&D Voucher Digital</title>
  <meta name="description" content="D&D Voucher Digital ‚Äî Pusat voucher digital terpercaya. Order cepat, pembayaran aman, dan proses rapi."/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer"/>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{
      --bg: #0b1020;
      --card: rgba(255,255,255,.06);
      --card2: rgba(255,255,255,.08);
      --stroke: rgba(255,255,255,.10);
      --muted: rgba(255,255,255,.68);
      --text: rgba(255,255,255,.92);
      --brand: #8b5cf6; /* violet */
      --brand2:#60a5fa; /* blue */
      --ok:#22c55e;
      --warn:#f59e0b;
      --bad:#ef4444;
      --shadow: 0 18px 55px rgba(0,0,0,.35);
    }
    html.light{
      --bg:#f6f7fb;
      --card:#ffffff;
      --card2:#ffffff;
      --stroke:#e6e8f2;
      --muted:#6b7280;
      --text:#0f172a;
      --shadow: 0 18px 55px rgba(16,24,40,.12);
    }
    body{font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";}
    .glass{background: var(--card); border: 1px solid var(--stroke); box-shadow: var(--shadow);}
    .glass2{background: var(--card2); border: 1px solid var(--stroke);}
    .grad{
      background:
        radial-gradient(900px 420px at 20% -10%, rgba(139,92,246,.35), transparent 60%),
        radial-gradient(800px 420px at 90% 10%, rgba(96,165,250,.28), transparent 60%),
        radial-gradient(900px 500px at 50% 120%, rgba(34,197,94,.18), transparent 55%);
    }
    .ring-soft{box-shadow: 0 0 0 1px var(--stroke) inset;}
    .tab-active{background: linear-gradient(90deg, rgba(139,92,246,.95), rgba(96,165,250,.92)); color:#fff;}
    .chip{border:1px solid var(--stroke); background: var(--card2); color: var(--text);}
    .btn{background: linear-gradient(90deg, rgba(139,92,246,.95), rgba(96,165,250,.92)); color:#fff;}
    .btn:hover{filter: brightness(1.03);}
    .btn-ghost{background: transparent; border:1px solid var(--stroke); color: var(--text);}
    .btn-ghost:hover{background: var(--card2);}
    .input{background: transparent; border:1px solid var(--stroke); color: var(--text);}
    html.light .input{background:#fff;}
    .helper{color: var(--muted);}
    .kpi{background: var(--card2); border:1px solid var(--stroke);}
    .safe-bottom{padding-bottom: 92px;} /* biar footer gak ketutup bottom nav */
    @media (min-width: 768px){ .safe-bottom{padding-bottom: 0;} }
  </style>
</head>

<body class="min-h-screen" style="background: var(--bg); color: var(--text);">
  <div id="top"></div>

  <!-- HEADER -->
  <header class="sticky top-0 z-50 backdrop-blur-md" style="background: color-mix(in srgb, var(--bg) 88%, transparent); border-bottom: 1px solid var(--stroke);">
    <div class="mx-auto max-w-6xl px-4">
      <div class="flex h-16 items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="h-9 w-9 rounded-xl flex items-center justify-center ring-soft" style="background: linear-gradient(135deg, rgba(139,92,246,.9), rgba(96,165,250,.85));">
            <i class="fa-solid fa-ticket text-white"></i>
          </div>
          <div class="leading-tight">
            <div class="text-[11px] font-semibold tracking-wide" style="color: color-mix(in srgb, var(--brand) 80%, var(--text));">D&D</div>
            <div class="text-lg font-extrabold">Voucher Digital</div>
          </div>
        </div>

        <div class="flex items-center gap-2">
          <a id="waTop" class="h-10 w-10 rounded-xl grid place-items-center btn-ghost" href="#" aria-label="Hubungi Admin WhatsApp" title="Hubungi Admin WhatsApp">
            <i class="fa-brands fa-whatsapp"></i>
          </a>
          <button id="themeBtn" class="h-10 w-10 rounded-xl grid place-items-center btn-ghost" aria-label="Toggle Mode" title="Toggle Light/Dark">
            <i id="themeIcon" class="fa-solid fa-moon"></i>
          </button>
        </div>
      </div>

      <!-- NAV PILLS -->
      <div class="pb-3 -mt-1">
        <nav class="flex gap-2 text-sm font-semibold">
          <a class="px-4 py-2 rounded-full chip" href="#cara"><i class="fa-regular fa-circle-question mr-2"></i>Cara Order</a>
          <a class="px-4 py-2 rounded-full chip" href="#order"><i class="fa-solid fa-bolt mr-2"></i>Order Now</a>
          <a class="px-4 py-2 rounded-full chip" href="#admin"><i class="fa-solid fa-headset mr-2"></i>Admin</a>
        </nav>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <main class="safe-bottom">
    <section class="grad border-b" style="border-color: var(--stroke);">
      <div class="mx-auto max-w-6xl px-4 py-12 md:py-16">
        <div class="grid lg:grid-cols-2 gap-10 items-center">
          <div class="space-y-6">
            <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full glass2 text-xs font-semibold uppercase tracking-wide">
              <i class="fa-solid fa-shield-halved" style="color: color-mix(in srgb, var(--brand2) 80%, white);"></i>
              Platform Voucher Digital Terpercaya
            </div>

            <h1 class="text-3xl md:text-5xl font-extrabold leading-tight">
              Welcome to <span style="color: color-mix(in srgb, var(--brand) 85%, white);">D&D Voucher Digital</span>
            </h1>
            <p class="text-base md:text-lg helper max-w-xl">
              Menjual voucher digital promo <b>Alfamart</b>, <b>Indomaret</b>, dan lainnya. Alur jelas, data rapi, dan status bisa dipantau.
            </p>

            <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
              <div class="kpi rounded-2xl p-4">
                <div class="text-xs helper font-semibold flex items-center gap-2"><i class="fa-solid fa-bolt" style="color: var(--brand2)"></i>Proses</div>
                <div class="text-xl font-extrabold mt-1">Cepat</div>
              </div>
              <div class="kpi rounded-2xl p-4">
                <div class="text-xs helper font-semibold flex items-center gap-2"><i class="fa-solid fa-shield" style="color: var(--ok)"></i>Keamanan</div>
                <div class="text-xl font-extrabold mt-1">Terkontrol</div>
              </div>
              <div class="kpi rounded-2xl p-4">
                <div class="text-xs helper font-semibold flex items-center gap-2"><i class="fa-solid fa-receipt" style="color: var(--warn)"></i>Tracking</div>
                <div class="text-xl font-extrabold mt-1">Rapi</div>
              </div>
            </div>

            <div class="flex flex-wrap gap-3 pt-1">
              <a href="#order" class="px-6 py-3 rounded-xl btn font-semibold inline-flex items-center gap-2">
                <i class="fa-solid fa-bolt"></i> Buat Order
              </a>
              <a href="#cara" class="px-6 py-3 rounded-xl btn-ghost font-semibold inline-flex items-center gap-2">
                <i class="fa-regular fa-circle-question"></i> Lihat Cara Order
              </a>
            </div>

            <p class="text-xs helper">
              Catatan: tombol order akan aktif jika <b>Qty minimal 12</b>.
            </p>
          </div>

          <div class="lg:justify-self-end">
            <div class="glass rounded-3xl p-6 md:p-7">
              <div class="flex items-center justify-between gap-3 mb-4">
                <div class="font-extrabold text-lg">Ringkasan Produk</div>
                <span class="text-xs px-3 py-1 rounded-full glass2">1 varian</span>
              </div>
              <div class="space-y-3">
                <div class="glass2 rounded-2xl p-4">
                  <div class="flex items-start justify-between gap-3">
                    <div>
                      <div class="font-bold">Frestea Blackcurrant 500ml</div>
                      <div class="text-sm helper mt-1">Voucher foto (digital) ‚Ä¢ Redeem: Alfa/Indo</div>
                    </div>
                    <div class="text-right">
                      <div class="text-xs helper">Min order</div>
                      <div class="font-extrabold">12</div>
                    </div>
                  </div>
                </div>
                <div class="glass2 rounded-2xl p-4">
                  <div class="text-sm helper">Flow</div>
                  <div class="mt-2 grid grid-cols-3 gap-2 text-xs font-semibold">
                    <div class="rounded-xl p-3 ring-soft text-center">Order</div>
                    <div class="rounded-xl p-3 ring-soft text-center">Bayar</div>
                    <div class="rounded-xl p-3 ring-soft text-center">Approve</div>
                  </div>
                  <div class="mt-3 text-sm helper">
                    Setelah admin approve, link download akan muncul dan/atau dikirim ke email pembeli.
                  </div>
                </div>
              </div>
              <div class="mt-5">
                <a href="#admin" class="w-full px-5 py-3 rounded-xl btn-ghost font-semibold inline-flex items-center justify-center gap-2">
                  <i class="fa-brands fa-whatsapp"></i> Hubungi Admin
                </a>
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>

    <!-- CARA ORDER -->
    <section id="cara" class="py-12 md:py-14">
      <div class="mx-auto max-w-6xl px-4">
        <div class="text-center mb-8">
          <h2 class="text-2xl md:text-3xl font-extrabold">Cara Order</h2>
          <p class="helper mt-2">Ikutin langkah ini biar prosesnya mulus & cepat.</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          <div class="glass2 rounded-2xl p-5">
            <div class="h-12 w-12 rounded-xl grid place-items-center mb-3" style="background: color-mix(in srgb, var(--brand) 18%, transparent); border:1px solid var(--stroke);">
              <i class="fa-solid fa-pen-to-square" style="color: color-mix(in srgb, var(--brand) 85%, white);"></i>
            </div>
            <div class="font-bold">1) Isi data</div>
            <div class="text-sm helper mt-1">Nama, email, No HP, qty, dan pilihan redeem.</div>
          </div>

          <div class="glass2 rounded-2xl p-5">
            <div class="h-12 w-12 rounded-xl grid place-items-center mb-3" style="background: color-mix(in srgb, var(--brand2) 16%, transparent); border:1px solid var(--stroke);">
              <i class="fa-solid fa-bolt" style="color: color-mix(in srgb, var(--brand2) 85%, white);"></i>
            </div>
            <div class="font-bold">2) Buat order</div>
            <div class="text-sm helper mt-1">Klik <b>Buat Order</b> untuk mendapatkan ID order.</div>
          </div>

          <div class="glass2 rounded-2xl p-5">
            <div class="h-12 w-12 rounded-xl grid place-items-center mb-3" style="background: color-mix(in srgb, var(--ok) 14%, transparent); border:1px solid var(--stroke);">
              <i class="fa-solid fa-qrcode" style="color: var(--ok);"></i>
            </div>
            <div class="font-bold">3) Pembayaran</div>
            <div class="text-sm helper mt-1">Pilih QRIS/Transfer. Upload bukti jika transfer.</div>
          </div>

          <div class="glass2 rounded-2xl p-5">
            <div class="h-12 w-12 rounded-xl grid place-items-center mb-3" style="background: color-mix(in srgb, var(--warn) 14%, transparent); border:1px solid var(--stroke);">
              <i class="fa-solid fa-box-open" style="color: var(--warn);"></i>
            </div>
            <div class="font-bold">4) Approve & selesai</div>
            <div class="text-sm helper mt-1">Admin approve ‚Üí link download aktif (menghindari double).</div>
          </div>
        </div>
      </div>
    </section>

    <!-- ORDER -->
    <section id="order" class="py-12 md:py-14">
      <div class="mx-auto max-w-6xl px-4">
        <div class="grid lg:grid-cols-3 gap-6 items-start">
          <div class="lg:col-span-2 glass rounded-3xl p-6 md:p-7">
            <div class="flex items-start justify-between gap-4 mb-6">
              <div>
                <h2 class="text-2xl md:text-3xl font-extrabold">Order Now</h2>
                <p class="helper mt-2">Isi form, pastikan qty min 12, lalu pilih metode pembayaran.</p>
              </div>
              <div class="hidden md:flex items-center gap-2">
                <span class="text-xs px-3 py-1 rounded-full glass2"><i class="fa-solid fa-lock mr-2"></i>Secure</span>
                <span class="text-xs px-3 py-1 rounded-full glass2"><i class="fa-solid fa-receipt mr-2"></i>Tracked</span>
              </div>
            </div>

            <form id="orderForm" class="space-y-4" autocomplete="on">
              <div class="grid md:grid-cols-2 gap-4">
                <div>
                  <label class="text-sm font-semibold">Nama</label>
                  <input id="name" class="mt-2 w-full rounded-xl px-4 py-3 input outline-none focus:ring-2 focus:ring-violet-500/40" placeholder="Nama lengkap" required>
                </div>
                <div>
                  <label class="text-sm font-semibold">Email</label>
                  <input id="email" type="email" class="mt-2 w-full rounded-xl px-4 py-3 input outline-none focus:ring-2 focus:ring-violet-500/40" placeholder="email@contoh.com" required>
                </div>
              </div>

              <div class="grid md:grid-cols-2 gap-4">
                <div>
                  <label class="text-sm font-semibold">No HP</label>
                  <input id="phone" inputmode="numeric" class="mt-2 w-full rounded-xl px-4 py-3 input outline-none focus:ring-2 focus:ring-violet-500/40" placeholder="08xxxxxxxxxx" required>
                  <p class="text-xs helper mt-2">No HP pembeli (buat konfirmasi jika diperlukan). Tidak ditampilkan publik.</p>
                </div>

                <div>
                  <label class="text-sm font-semibold">Qty Order (min 12)</label>
                  <input id="qty" type="number" min="1" class="mt-2 w-full rounded-xl px-4 py-3 input outline-none focus:ring-2 focus:ring-violet-500/40" placeholder="12" required>
                  <p id="qtyHint" class="text-xs helper mt-2">Masukkan qty minimal 12 untuk mengaktifkan tombol order.</p>
                </div>
              </div>

              <div class="grid md:grid-cols-2 gap-4">
                <div>
                  <label class="text-sm font-semibold">Redeem</label>
                  <select id="redeem" class="mt-2 w-full rounded-xl px-4 py-3 input outline-none focus:ring-2 focus:ring-violet-500/40" required>
                    <option value="Alfamart">Alfamart</option>
                    <option value="Indomaret">Indomaret</option>
                  </select>
                </div>

                <div>
                  <label class="text-sm font-semibold">Produk</label>
                  <input class="mt-2 w-full rounded-xl px-4 py-3 input outline-none" value="Frestea Blackcurrant 500ml (Voucher Foto)" readonly>
                </div>
              </div>

              <div class="glass2 rounded-2xl p-4">
                <div class="flex items-center justify-between gap-4">
                  <div>
                    <div class="text-xs helper">Harga / Voucher</div>
                    <div class="text-xl font-extrabold" id="priceEach">Rp 1.500</div>
                  </div>
                  <div class="text-right">
                    <div class="text-xs helper">Total Pembayaran</div>
                    <div class="text-xl font-extrabold" id="totalPay">Rp 0</div>
                  </div>
                </div>
                <p class="text-xs helper mt-2">Total otomatis dihitung dari Qty √ó Harga/voucher.</p>
              </div>


              <div class="pt-2 flex flex-wrap gap-3">
                <button id="btnCreate" type="button" class="px-6 py-3 rounded-xl btn font-semibold inline-flex items-center gap-2 disabled:opacity-40 disabled:cursor-not-allowed">
                  <i class="fa-solid fa-bolt"></i> Buat Order
                </button>
                <button id="btnReset" type="reset" class="px-6 py-3 rounded-xl btn-ghost font-semibold inline-flex items-center gap-2">
                  <i class="fa-solid fa-rotate-left"></i> Reset
                </button>
              </div>

              <div id="orderMeta" class="hidden mt-2 glass2 rounded-2xl p-4">
                <div class="flex flex-wrap items-center justify-between gap-3">
                  <div>
                    <div class="text-xs helper">Order ID</div>
                    <div class="font-extrabold text-lg" id="orderId">-</div>
                  </div>
                  <div class="text-right">
                    <div class="text-xs helper">Status</div>
                    <div class="font-extrabold" id="orderStatus">Menunggu Pembayaran</div>
                  </div>
                </div>

                <div class="mt-3 grid md:grid-cols-3 gap-3">
                  <div class="rounded-2xl p-4 ring-soft">
                    <div class="text-xs helper">Qty</div>
                    <div class="font-extrabold mt-1" id="metaQty">-</div>
                  </div>
                  <div class="rounded-2xl p-4 ring-soft">
                    <div class="text-xs helper">Harga / Voucher</div>
                    <div class="font-extrabold mt-1" id="metaPrice">Rp 1.500</div>
                  </div>
                  <div class="rounded-2xl p-4 ring-soft">
                    <div class="text-xs helper">Total Pembayaran</div>
                    <div class="font-extrabold mt-1" id="metaTotal">Rp 0</div>
                  </div>
                </div>
              </div>
            </form>

            <!-- PAYMENT -->
            <div class="mt-6 glass2 rounded-3xl p-5 md:p-6">
              <div class="flex items-center justify-between gap-3 mb-4">
                <div class="font-extrabold text-lg">Metode Pembayaran</div>
                <div class="text-xs helper">Pilih salah satu</div>
              </div>

              <div class="flex gap-2">
                <button id="tabQris" class="px-4 py-2 rounded-full text-sm font-bold tab-active">QRIS</button>
                <button id="tabTf" class="px-4 py-2 rounded-full text-sm font-bold chip">Transfer / E-Wallet</button>
              </div>

              <!-- QRIS -->
              <div id="panelQris" class="mt-4">
                <div class="grid md:grid-cols-2 gap-4 items-start">
                  <div class="glass2 rounded-2xl p-4">
                    <div class="text-sm helper">Scan QRIS di bawah ini:</div>
                    <div class="mt-3 rounded-2xl overflow-hidden ring-soft">
                      <img src="qris.png" alt="QRIS" class="w-full h-auto block" onerror="this.closest('.ring-soft').innerHTML='<div class=&quot;p-4 text-sm helper&quot;>Gambar QRIS tidak ditemukan. Pastikan file <b>qris.png</b> ada di folder yang sama dengan HTML.</div>';">
                    </div>

                    <div class="mt-4 flex items-center justify-between gap-2">
                      <div class="text-xs helper">Timer pembayaran</div>
                      <div class="font-extrabold"><span id="timer">--:--</span></div>
                    </div>
                    <div class="mt-2 text-xs helper">Jika timer habis, minta admin untuk generate ulang / lakukan order ulang.</div>

                    <div class="mt-4 flex gap-2">
                      <button id="btnStartTimer" class="px-4 py-2 rounded-xl btn-ghost font-semibold text-sm">
                        Mulai Timer
                      </button>
                      <button id="btnPaid" class="px-4 py-2 rounded-xl btn font-semibold text-sm disabled:opacity-40 disabled:cursor-not-allowed" disabled>
                        Sudah Payment
                      </button>
                    </div>
                  </div>

                  <div class="glass2 rounded-2xl p-4">
                    <div class="font-bold">Konfirmasi Cepat</div>
                    <p class="text-sm helper mt-2">
                      Setelah bayar, tekan <b>Sudah Payment</b> biar admin dapet notifikasi dan bisa approve lebih cepat.
                    </p>

                    <div class="mt-4 rounded-2xl p-4 ring-soft">
                      <div class="text-xs helper">Catatan</div>
                      <div class="text-sm mt-2 helper">
                        - Link download aktif setelah admin approve.<br>
                        - Data order tercatat rapi di sistem.
                      </div>
                    </div>

                    <div class="mt-4">
                      <button id="btnPingAdmin" class="w-full px-4 py-3 rounded-xl btn-ghost font-semibold inline-flex items-center justify-center gap-2">
                        <i class="fa-brands fa-whatsapp"></i> Chat Admin (Sertakan Order ID)
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- TRANSFER -->
              <div id="panelTf" class="hidden mt-4">
                <div class="grid md:grid-cols-2 gap-4">
                  <div class="glass2 rounded-2xl p-4">
                    <div class="font-bold">ATM / Bank</div>
                    <div class="mt-3 text-sm helper space-y-2">
                      <div class="flex items-center justify-between"><span>ALADIN</span><span class="font-extrabold">50418072326</span></div>
                      <div class="flex items-center justify-between"><span>BCA</span><span class="font-extrabold">5505059198</span></div>
                      <div class="flex items-center justify-between"><span>SEABANK</span><span class="font-extrabold">901245439994</span></div>
                      <div class="flex items-center justify-between"><span>SUPERBANK</span><span class="font-extrabold">000075561431</span></div>
                      <div class="pt-2 text-xs helper">A/n <b>BRANDO</b></div>
                    </div>
                  </div>

                  <div class="glass2 rounded-2xl p-4">
                    <div class="font-bold">E-Wallet</div>
                    <div class="mt-3 text-sm helper space-y-2">
                      <div class="flex items-center justify-between"><span>ShopeePay</span><span class="font-extrabold">081717872185</span></div>
                      <div class="flex items-center justify-between"><span>DANA</span><span class="font-extrabold">085182197994</span></div>
                      <div class="text-xs" style="color: color-mix(in srgb, var(--warn) 70%, var(--text));">‚ö†Ô∏è Jika TF pakai DANA wajib lebihkan +100p (biaya potongan admin).</div>
                      <div class="flex items-center justify-between"><span>GoPay</span><span class="font-extrabold">081717872185</span></div>
                      <div class="flex items-center justify-between"><span>OVO</span><span class="font-extrabold">081717872185</span></div>
                      <div class="flex items-center justify-between"><span>iSaku</span><span class="font-extrabold">087809236556</span></div>
                      <div class="pt-2 text-xs helper">A/n <b>Brando / Brando26</b></div>
                    </div>
                  </div>
                </div>

                <div class="mt-4 glass2 rounded-2xl p-4">
                  <div class="font-bold">Upload Bukti Transfer</div>
                  <p class="text-sm helper mt-2">Upload screenshot bukti tf biar admin bisa approve cepat.</p>
                  <div class="mt-3 grid md:grid-cols-2 gap-3 items-center">
                    <input id="proof" type="file" accept="image/*" class="w-full rounded-xl px-4 py-3 input">
                    <button id="btnUploadProof" class="px-4 py-3 rounded-xl btn font-semibold disabled:opacity-40 disabled:cursor-not-allowed" disabled>
                      Upload Bukti
                    </button>
                  </div>
                  <p class="text-xs helper mt-2">File hanya dipakai untuk verifikasi transaksi order ini.</p>
                </div>
              </div>

              <!-- TRACKING -->
              <div class="mt-4">
                <div class="glass2 rounded-2xl p-4">
                  <div class="flex items-center justify-between gap-3">
                    <div class="font-bold">Tracking</div>
                    <button id="btnCheck" class="px-4 py-2 rounded-xl btn-ghost font-semibold text-sm">
                      Cek Status
                    </button>
                  </div>
                  <div class="mt-3 grid md:grid-cols-3 gap-3">
                    <div class="rounded-2xl p-4 ring-soft">
                      <div class="text-xs helper">Status</div>
                      <div class="font-extrabold mt-1" id="trackStatus">-</div>
                    </div>
                    <div class="rounded-2xl p-4 ring-soft">
                      <div class="text-xs helper">Email</div>
                      <div class="font-extrabold mt-1 truncate" id="trackEmail">-</div>
                    </div>
                    <div class="rounded-2xl p-4 ring-soft">
                      <div class="text-xs helper">Link Download</div>
                      <a class="font-extrabold mt-1 block truncate underline decoration-dotted" id="trackLink" href="#" target="_blank" rel="noopener">-</a>
                    </div>
                  </div>
                  <p class="text-xs helper mt-3">Link download muncul setelah admin approve.</p>
                </div>
              </div>

            </div>
          </div>

          <!-- SIDEBAR -->
          <aside class="space-y-6">
            <div class="glass rounded-3xl p-6">
              <div class="font-extrabold text-lg">Info Penting</div>
              <ul class="mt-3 text-sm helper space-y-2">
                <li class="flex gap-2"><i class="fa-solid fa-circle-check mt-1" style="color: var(--ok)"></i><span>Qty min <b>12</b> untuk mengaktifkan tombol order.</span></li>
                <li class="flex gap-2"><i class="fa-solid fa-circle-check mt-1" style="color: var(--ok)"></i><span>Konfirmasi cepat via tombol <b>Sudah Payment</b>.</span></li>
                <li class="flex gap-2"><i class="fa-solid fa-circle-check mt-1" style="color: var(--ok)"></i><span>Admin approve ‚Üí link download aktif (menghindari double).</span></li>
              </ul>
            </div>

            <div class="glass rounded-3xl p-6">
              <div class="font-extrabold text-lg">Butuh bantuan?</div>
              <p class="text-sm helper mt-2">Chat admin, sertakan <b>Order ID</b> biar responnya ngebut.</p>
              <a id="waSide" href="#" class="mt-4 w-full px-5 py-3 rounded-xl btn font-semibold inline-flex items-center justify-center gap-2">
                <i class="fa-brands fa-whatsapp"></i> Hubungi Admin
              </a>
            </div>

            <div class="glass2 rounded-3xl p-6">
              <div class="text-xs helper font-semibold uppercase tracking-wide">Konfigurasi Backend</div>
              <p class="text-sm helper mt-2">
                Kalau muncul ‚ÄúError backend‚Äù, artinya endpoint Apps Script belum cocok / belum publish aksesnya.
              </p>
              <div class="mt-3 rounded-2xl p-4 ring-soft text-xs helper">
                Tinggal ganti <b>SCRIPT_URL</b> di bagian JS (paling bawah) pakai URL Apps Script lu.
              </div>
            </div>
          </aside>
        </div>
      </div>
    </section>

    <!-- ADMIN -->
    <section id="admin" class="py-12 md:py-14">
      <div class="mx-auto max-w-6xl px-4">
        <div class="glass rounded-3xl p-7">
          <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
            <div>
              <h2 class="text-2xl md:text-3xl font-extrabold">Admin Support</h2>
              <p class="helper mt-2">Kalau ada kendala pembayaran / order, chat admin. Sertakan Order ID.</p>
            </div>
            <a id="waAdmin" href="#" class="px-6 py-3 rounded-xl btn font-semibold inline-flex items-center justify-center gap-2">
              <i class="fa-brands fa-whatsapp"></i> Chat Admin
            </a>
          </div>

          <div class="mt-6 grid md:grid-cols-2 gap-4">
            <div class="glass2 rounded-2xl p-5">
              <div class="font-bold">Jam Respon</div>
              <p class="text-sm helper mt-2">Setiap hari ‚Ä¢ respon secepatnya. Kalau rame, tunggu bentar ya üòÑ</p>
            </div>
            <div class="glass2 rounded-2xl p-5">
              <div class="font-bold">Format Chat</div>
              <p class="text-sm helper mt-2">‚ÄúHalo admin, saya sudah bayar. Order ID: XXXXX‚Äù</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FOOTER -->
    <footer class="border-t" style="border-color: var(--stroke);">
      <div class="mx-auto max-w-6xl px-4 py-8 text-center">
        <div class="text-sm helper">¬© 2026 Digital Voucher Platform ‚Äî All rights reserved</div>
        <div class="text-xs helper mt-2">Powered by <span class="font-semibold">D&D Corp</span></div>
      </div>
    </footer>
  </main>

  <!-- BOTTOM NAV (MOBILE) -->
  <nav class="fixed bottom-0 left-0 right-0 z-50 md:hidden" style="background: color-mix(in srgb, var(--bg) 88%, transparent); border-top: 1px solid var(--stroke); backdrop-filter: blur(12px);">
    <div class="mx-auto max-w-6xl px-4">
      <div class="flex justify-around py-2">
        <a href="#top" class="flex-1 py-2 rounded-2xl text-center">
          <div class="text-lg"><i class="fa-solid fa-house"></i></div>
          <div class="text-[11px] font-semibold helper">Beranda</div>
        </a>
        <a href="#cara" class="flex-1 py-2 rounded-2xl text-center">
          <div class="text-lg"><i class="fa-regular fa-circle-question"></i></div>
          <div class="text-[11px] font-semibold helper">Cara</div>
        </a>
        <a href="#order" class="flex-1 py-2 rounded-2xl text-center">
          <div class="text-lg"><i class="fa-solid fa-bolt"></i></div>
          <div class="text-[11px] font-semibold helper">Order</div>
        </a>
        <a href="#admin" class="flex-1 py-2 rounded-2xl text-center">
          <div class="text-lg"><i class="fa-brands fa-whatsapp"></i></div>
          <div class="text-[11px] font-semibold helper">Admin</div>
        </a>
      </div>
    </div>
  </nav>

  <script>
    // =========================
    //  CONFIG (tinggal edit)
    // =========================
    const ADMIN_WA = "6285774122710"; // 085774122710 -> 6285774122710
    const SCRIPT_URL = "PASTE_APPS_SCRIPT_URL_DI_SINI"; 
    // contoh: "https://script.google.com/macros/s/AKfy.../exec"

    // =========================
    //  THEME
    // =========================
    const root = document.documentElement;
    const themeBtn = document.getElementById("themeBtn");
    const themeIcon = document.getElementById("themeIcon");

    function applyTheme(mode){
      if(mode === "light"){
        root.classList.add("light");
        themeIcon.className = "fa-solid fa-sun";
      } else {
        root.classList.remove("light");
        themeIcon.className = "fa-solid fa-moon";
      }
      localStorage.setItem("dd_theme", mode);
    }

    const saved = localStorage.getItem("dd_theme");
    if(saved){ applyTheme(saved); } else { applyTheme("dark"); }

    themeBtn.addEventListener("click", () => {
      const isLight = root.classList.contains("light");
      applyTheme(isLight ? "dark" : "light");
    });

    // =========================
    //  WA LINKS
    // =========================
    function waLink(text){
      return `https://wa.me/${ADMIN_WA}?text=${encodeURIComponent(text)}`;
    }
    const waButtons = ["waTop","waSide","waAdmin","btnPingAdmin"].map(id => document.getElementById(id));
    function refreshWa(orderId=""){
      const msg = orderId 
        ? `Halo admin, saya mau konfirmasi order.\nOrder ID: ${orderId}\nTerima kasih.`
        : "Halo admin, saya mau tanya dulu sebelum order.";
      waButtons.forEach(el => { if(el) el.href = waLink(msg); });
    }
    refreshWa("");

    // =========================
    //  FORM & VALIDATION
    // =========================
    const qty = document.getElementById("qty");
    const qtyHint = document.getElementById("qtyHint");
    const btnCreate = document.getElementById("btnCreate");
    const btnPaid = document.getElementById("btnPaid");
    const btnUploadProof = document.getElementById("btnUploadProof");
    const proof = document.getElementById("proof");

    const PRICE_EACH = 1500; // harga per voucher (Rp)
    function rupiah(n){
      try{
        return new Intl.NumberFormat("id-ID", {style:"currency", currency:"IDR", maximumFractionDigits:0}).format(n);
      }catch(e){
        return "Rp " + String(n).replace(/\B(?=(\d{3})+(?!\d))/g, ".");
      }
    }

    const priceEachEl = document.getElementById("priceEach");
    const totalPayEl = document.getElementById("totalPay");
    const metaQtyEl = document.getElementById("metaQty");
    const metaPriceEl = document.getElementById("metaPrice");
    const metaTotalEl = document.getElementById("metaTotal");

    if(priceEachEl) priceEachEl.textContent = rupiah(PRICE_EACH);
    if(metaPriceEl) metaPriceEl.textContent = rupiah(PRICE_EACH);

    function updateTotals(){
      const q = Number(qty.value || 0);
      const total = Math.max(0, q) * PRICE_EACH;
      if(totalPayEl) totalPayEl.textContent = rupiah(total);
      if(metaQtyEl) metaQtyEl.textContent = q ? String(q) : "-";
      if(metaTotalEl) metaTotalEl.textContent = rupiah(total);
      return total;
    }


    function validateQty(){
      const q = Number(qty.value || 0);
      updateTotals();
      const ok = q >= 12;
      btnCreate.disabled = !ok;
      qtyHint.textContent = ok ? "Qty valid. Tombol order sudah aktif." : "Masukkan qty minimal 12 untuk mengaktifkan tombol order.";
      qtyHint.style.color = ok ? "color-mix(in srgb, var(--ok) 70%, var(--text))" : "var(--muted)";
      return ok;
    }
    qty.addEventListener("input", validateQty);
    updateTotals();
    validateQty();

    proof.addEventListener("change", () => {
      btnUploadProof.disabled = !proof.files || proof.files.length === 0 || !currentOrderId;
    });

    // =========================
    //  PAYMENT TABS
    // =========================
    const tabQris = document.getElementById("tabQris");
    const tabTf = document.getElementById("tabTf");
    const panelQris = document.getElementById("panelQris");
    const panelTf = document.getElementById("panelTf");

    function setTab(which){
      if(which === "qris"){
        tabQris.classList.add("tab-active");
        tabTf.classList.remove("tab-active");
        tabTf.classList.add("chip");
        panelQris.classList.remove("hidden");
        panelTf.classList.add("hidden");
      } else {
        tabTf.classList.add("tab-active");
        tabQris.classList.remove("tab-active");
        tabQris.classList.add("chip");
        panelTf.classList.remove("hidden");
        panelQris.classList.add("hidden");
      }
    }
    tabQris.addEventListener("click", () => setTab("qris"));
    tabTf.addEventListener("click", () => setTab("tf"));
    setTab("qris");

    // =========================
    //  TIMER (QRIS)
    // =========================
    const timerEl = document.getElementById("timer");
    const btnStartTimer = document.getElementById("btnStartTimer");
    let timerInterval = null;
    let endsAt = null;

    function fmt(n){ return String(n).padStart(2,"0"); }

    function startTimer(minutes=10){
      endsAt = Date.now() + minutes*60*1000;
      clearInterval(timerInterval);
      btnPaid.disabled = !currentOrderId;
      timerInterval = setInterval(() => {
        const diff = endsAt - Date.now();
        if(diff <= 0){
          clearInterval(timerInterval);
          timerEl.textContent = "00:00";
          btnPaid.disabled = true;
          Swal.fire({
            icon: "warning",
            title: "Waktu pembayaran habis",
            text: "Timer sudah habis. Silakan minta admin untuk generate ulang atau buat order ulang.",
            confirmButtonText: "OK"
          });
          return;
        }
        const mm = Math.floor(diff/60000);
        const ss = Math.floor((diff%60000)/1000);
        timerEl.textContent = `${fmt(mm)}:${fmt(ss)}`;
      }, 250);
    }
    btnStartTimer.addEventListener("click", () => {
      startTimer(10);
      Swal.fire({icon:"info", title:"Timer aktif", text:"Silakan lakukan pembayaran sebelum waktu habis."});
    });

    // =========================
    //  BACKEND (Apps Script)
    // =========================
    let currentOrderId = "";
    const orderMeta = document.getElementById("orderMeta");
    const orderIdEl = document.getElementById("orderId");
    const orderStatusEl = document.getElementById("orderStatus");

    const trackStatus = document.getElementById("trackStatus");
    const trackEmail = document.getElementById("trackEmail");
    const trackLink = document.getElementById("trackLink");

    function hasBackend(){
      return SCRIPT_URL && SCRIPT_URL.startsWith("http");
    }

    async function postJSON(action, payload){
      if(!hasBackend()){
        throw new Error("SCRIPT_URL belum diisi. Tempel URL Apps Script dulu.");
      }
      const res = await fetch(SCRIPT_URL, {
        method: "POST",
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify({action, ...payload})
      });
      const data = await res.json().catch(() => ({}));
      if(!res.ok || data.ok === false){
        const msg = data.message || `HTTP ${res.status}`;
        throw new Error(msg);
      }
      return data;
    }

    function getForm(){
      return {
        name: document.getElementById("name").value.trim(),
        email: document.getElementById("email").value.trim(),
        phone: document.getElementById("phone").value.trim(),
        qty: Number(document.getElementById("qty").value || 0),
        redeem: document.getElementById("redeem").value,
        priceEach: PRICE_EACH,
        totalPay: updateTotals(),
        product: "Frestea Blackcurrant 500ml (Voucher Foto)"
      };
    }

    btnCreate.addEventListener("click", async () => {
      if(!validateQty()){
        Swal.fire({icon:"error", title:"Qty belum memenuhi", text:"Minimal order 12 ya."});
        return;
      }
      const f = getForm();
      if(!f.name || !f.email || !f.phone){
        Swal.fire({icon:"error", title:"Data belum lengkap", text:"Nama, Email, dan No HP wajib diisi."});
        return;
      }

      try{
        Swal.fire({title:"Membuat order...", allowOutsideClick:false, didOpen:() => Swal.showLoading()});

        let id = "DD" + Date.now().toString().slice(-8);
        if(hasBackend()){
          const out = await postJSON("createOrder", f);
          id = out.orderId || id;
        }

        currentOrderId = id;
        orderIdEl.textContent = id;
        orderStatusEl.textContent = "Menunggu Pembayaran";
        updateTotals();
        orderMeta.classList.remove("hidden");
        refreshWa(id);

        btnPaid.disabled = !(endsAt && (endsAt - Date.now() > 0));
        btnUploadProof.disabled = !(proof.files && proof.files.length > 0);

        Swal.fire({icon:"success", title:"Order dibuat", text:`Order ID: ${id}`});
      }catch(err){
        Swal.fire({icon:"error", title:"Error backend.", text:String(err.message || err)});
      }
    });

    btnPaid.addEventListener("click", async () => {
      if(!currentOrderId){
        Swal.fire({icon:"error", title:"Order belum ada", text:"Buat order dulu ya."});
        return;
      }
      try{
        Swal.fire({title:"Mengirim konfirmasi...", allowOutsideClick:false, didOpen:() => Swal.showLoading()});

        if(hasBackend()){
          await postJSON("markPaid", {orderId: currentOrderId});
        }

        orderStatusEl.textContent = "Menunggu Approve Admin";
        Swal.fire({icon:"success", title:"Terkirim", text:"Konfirmasi payment terkirim. Admin akan approve secepatnya."});
      }catch(err){
        Swal.fire({icon:"error", title:"Error backend.", text:String(err.message || err)});
      }
    });

    document.getElementById("btnCheck").addEventListener("click", async () => {
      if(!currentOrderId){
        Swal.fire({icon:"info", title:"Belum ada Order ID", text:"Buat order dulu biar bisa tracking."});
        return;
      }
      try{
        Swal.fire({title:"Cek status...", allowOutsideClick:false, didOpen:() => Swal.showLoading()});

        let status="Menunggu Approve Admin", link="-";
        if(hasBackend()){
          const out = await postJSON("checkStatus", {orderId: currentOrderId});
          status = out.status || status;
          link = out.downloadUrl || "-";
        }

        trackStatus.textContent = status;
        trackEmail.textContent = document.getElementById("email").value.trim() || "-";
        if(link && link !== "-"){
          trackLink.textContent = "Buka Link";
          trackLink.href = link;
        }else{
          trackLink.textContent = "-";
          trackLink.href = "#";
        }

        Swal.fire({icon:"success", title:"Status diupdate", text:`Status: ${status}`});
      }catch(err){
        Swal.fire({icon:"error", title:"Error backend.", text:String(err.message || err)});
      }
    });

    btnUploadProof.addEventListener("click", async () => {
      if(!currentOrderId){
        Swal.fire({icon:"error", title:"Order belum ada", text:"Buat order dulu ya."});
        return;
      }
      if(!proof.files || proof.files.length === 0){
        Swal.fire({icon:"error", title:"File belum dipilih", text:"Pilih screenshot bukti transfer dulu."});
        return;
      }

      try{
        Swal.fire({title:"Upload bukti...", allowOutsideClick:false, didOpen:() => Swal.showLoading()});

        if(hasBackend()){
          const file = proof.files[0];
          const b64 = await new Promise((resolve, reject) => {
            const reader = new FileReader();
            reader.onload = () => resolve(String(reader.result || ""));
            reader.onerror = () => reject(new Error("Gagal membaca file"));
            reader.readAsDataURL(file);
          });

          await postJSON("uploadProof", {orderId: currentOrderId, filename: proof.files[0].name, dataUrl: b64});
        }

        orderStatusEl.textContent = "Menunggu Approve Admin";
        Swal.fire({icon:"success", title:"Bukti terkirim", text:"Admin akan cek dan approve."});
      }catch(err){
        Swal.fire({icon:"error", title:"Error backend.", text:String(err.message || err)});
      }
    });

    document.getElementById("orderForm").addEventListener("reset", () => {
      setTimeout(() => {
        currentOrderId = "";
        orderMeta.classList.add("hidden");
        orderIdEl.textContent = "-";
        orderStatusEl.textContent = "-";
        trackStatus.textContent = "-";
        trackEmail.textContent = "-";
        trackLink.textContent = "-";
        trackLink.href = "#";
        btnPaid.disabled = true;
        btnUploadProof.disabled = true;
        refreshWa("");
        updateTotals();
        validateQty();
      }, 0);
    });
  </script>
</body>
</html>
