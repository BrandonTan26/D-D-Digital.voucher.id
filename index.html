<!doctype html>
<html lang="id" class="scroll-smooth">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>D&D Voucher Digital — Frestea Blackcurrant</title>
  <meta name="description" content="D&D Voucher Digital — pusat voucher digital terpercaya. Order mudah, pembayaran QRIS/transfer, pengiriman aman."/>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            dd: {
              50:'#f4f5ff',100:'#eef0ff',200:'#e5e7ff',600:'#5c63f2',700:'#6b57f6',800:'#1c2340',ink:'#0f1229'
            }
          },
          boxShadow: {
            soft:'0 10px 30px rgba(15,18,41,.10)',
            softDark:'0 18px 50px rgba(0,0,0,.40)'
          }
        }
      }
    }
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer"/>
  <style>
    input[type=number]::-webkit-outer-spin-button,input[type=number]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}
    input[type=number]{-moz-appearance:textfield}
  </style>
</head>
<body class="antialiased bg-dd-50 text-dd-800 dark:bg-dd-ink dark:text-white">
<header class="sticky top-0 z-40 bg-white/90 backdrop-blur border-b border-dd-200 shadow-sm dark:bg-dd-ink/80 dark:border-white/10">
  <div class="container mx-auto px-4">
    <div class="flex items-center justify-between h-16">
      <a href="#home" class="flex items-center">
        <div class="leading-none">
          <div class="text-xs tracking-wide text-dd-700 font-semibold">D&D</div>
          <div class="text-xl font-extrabold text-dd-800 dark:text-white">Voucher Digital</div>
        </div>
      </a>
      <div class="flex items-center gap-2 md:hidden">
        <button id="themeBtnMobile" class="px-3 py-2 rounded-full transition-all flex items-center gap-2 text-dd-800 hover:text-dd-600 hover:bg-dd-100 dark:text-white dark:hover:bg-white/10" aria-label="Toggle Mode">
          <i class="fa-solid fa-circle-half-stroke"></i>
        </button>
        <a href="https://wa.me/6285774122710?text=Halo%20Admin%2C%20saya%20mau%20order%20voucher%20Frestea%20Blackcurrant%20500ml." target="_blank" class="px-3 py-2 rounded-full transition-all flex items-center gap-2 text-dd-800 hover:text-dd-600 hover:bg-dd-100 dark:text-white dark:hover:bg-white/10" aria-label="Hubungi Admin WhatsApp">
          <i class="fa-brands fa-whatsapp"></i>
        </a>
      </div>
      <div class="hidden md:flex items-center gap-2">
        <nav class="flex items-center gap-2 text-sm font-semibold">
          <a href="#cara" class="px-4 py-2 rounded-full transition-all flex items-center gap-2 text-dd-800 hover:text-dd-600 hover:bg-dd-100 dark:text-white dark:hover:bg-white/10"><i class="fa-solid fa-list-check"></i>Cara Order</a>
          <a href="#order" class="px-4 py-2 rounded-full transition-all flex items-center gap-2 text-white bg-gradient-to-r from-dd-600 to-dd-700 shadow-md"><i class="fa-solid fa-bolt"></i>Order Now</a>
          <a href="#status" class="px-4 py-2 rounded-full transition-all flex items-center gap-2 text-dd-800 hover:text-dd-600 hover:bg-dd-100 dark:text-white dark:hover:bg-white/10"><i class="fa-solid fa-receipt"></i>Status</a>
          <a href="https://wa.me/6285774122710?text=Halo%20Admin%2C%20saya%20mau%20order%20voucher%20Frestea%20Blackcurrant%20500ml." target="_blank" class="px-4 py-2 rounded-full transition-all flex items-center gap-2 text-dd-800 hover:text-dd-600 hover:bg-dd-100 dark:text-white dark:hover:bg-white/10"><i class="fa-brands fa-whatsapp"></i>Hubungi Admin</a>
        </nav>
        <button id="themeBtn" class="ml-1 px-4 py-2 rounded-full transition-all flex items-center gap-2 text-dd-800 hover:text-dd-600 hover:bg-dd-100 dark:text-white dark:hover:bg-white/10" aria-label="Toggle Mode">
          <i class="fa-solid fa-circle-half-stroke"></i><span class="text-sm">Mode</span>
        </button>
      </div>
    </div>
  </div>
</header>

<main class="min-h-screen pb-24 md:pb-0" id="home">
  <section class="py-16 md:py-20 bg-gradient-to-br from-dd-ink via-[#13183a] to-dd-ink text-white border-b border-[#1e2448]">
    <div class="container mx-auto px-4 max-w-6xl">
      <div class="grid lg:grid-cols-2 gap-10 items-center">
        <div class="flex flex-col gap-6">
          <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/10 border border-white/15 text-xs font-semibold uppercase tracking-wide w-fit">
            <i class="fa-solid fa-ticket text-[#9aa3ff]"></i> Voucher Digital Resmi
          </div>
          <div>
            <h1 class="text-4xl md:text-5xl lg:text-6xl font-extrabold leading-tight">
              Welcome to D&D Voucher Digital<br/>
              <span class="bg-gradient-to-r from-dd-700 via-dd-600 to-[#4f5be6] bg-clip-text text-transparent">Cepat, Aman, Terdata</span>
            </h1>
            <p class="text-base md:text-lg text-white/80 max-w-xl mt-4">
              Pusat voucher digital terpercaya. Produk hari ini: <b>Frestea Blackcurrant 500ml</b>.
              Order lewat web, bayar QRIS/transfer, upload bukti, lalu tunggu approve admin.
            </p>
          </div>
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4 mt-6">
            <div class="p-4 rounded-2xl bg-white/10 border border-white/15 hover:bg-white/15 transition-colors">
              <div class="flex items-center gap-2 text-xs sm:text-sm text-white/80 mb-2"><i class="fa-solid fa-layer-group text-[#7b5cf7]"></i><span>Produk aktif</span></div>
              <div class="text-xl sm:text-2xl font-bold">1 varian</div>
            </div>
            <div class="p-4 rounded-2xl bg-white/10 border border-white/15 hover:bg-white/15 transition-colors">
              <div class="flex items-center gap-2 text-xs sm:text-sm text-white/80 mb-2"><i class="fa-solid fa-bolt text-[#7b5cf7]"></i><span>Flow order</span></div>
              <div class="text-xl sm:text-2xl font-bold">1–2 menit</div>
            </div>
            <div class="p-4 rounded-2xl bg-white/10 border border-white/15 hover:bg-white/15 transition-colors sm:col-span-2 lg:col-span-1">
              <div class="flex items-center gap-2 text-xs sm:text-sm text-white/80 mb-2"><i class="fa-solid fa-shield-halved text-[#f6d84c]"></i><span>Keamanan</span></div>
              <div class="text-xl sm:text-2xl font-bold">Verifikasi admin</div>
            </div>
          </div>
          <div class="flex flex-wrap gap-3">
            <a href="#order" class="px-6 py-3 rounded-xl bg-gradient-to-r from-dd-600 to-dd-700 font-semibold shadow-lg shadow-dd-600/30 hover:translate-y-[-2px] transition-transform">Order Sekarang</a>
            <a href="https://wa.me/6285774122710?text=Halo%20Admin%2C%20saya%20mau%20order%20voucher%20Frestea%20Blackcurrant%20500ml." target="_blank" class="px-6 py-3 rounded-xl border border-white/40 text-white font-semibold hover:bg-white/10 transition-colors"><i class="fa-brands fa-whatsapp mr-2"></i>Chat Admin</a>
          </div>
        </div>

        <div class="hidden lg:block">
          <div class="relative p-6 rounded-3xl bg-white/5 border border-white/10 backdrop-blur">
            <div class="absolute -top-6 -left-6 h-16 w-16 rounded-2xl bg-gradient-to-br from-dd-600 to-dd-700 blur-2xl opacity-60"></div>
            <div class="absolute -bottom-6 -right-6 h-16 w-16 rounded-2xl bg-gradient-to-br from-dd-600 to-[#4f5be6] blur-2xl opacity-60"></div>
            <div class="relative grid grid-cols-2 gap-3 text-dd-ink">
              <div class="p-4 rounded-2xl bg-white shadow-md border border-dd-200">
                <div class="text-sm font-semibold text-[#3c3fa8] mb-1">Alur</div>
                <div class="text-lg font-bold">Order → Bayar → Approve</div>
                <p class="text-sm text-gray-700 mt-1">Voucher dikirim setelah verifikasi</p>
              </div>
              <div class="p-4 rounded-2xl bg-white shadow-md border border-dd-200">
                <div class="text-sm font-semibold text-[#3c3fa8] mb-1">Delivery</div>
                <div class="text-lg font-bold">Email + Link Web</div>
                <p class="text-sm text-gray-700 mt-1">Akses ulang pakai token</p>
              </div>
              <div class="p-4 rounded-2xl bg-white shadow-md border border-dd-200 col-span-2 flex items-center gap-3">
                <span class="h-12 w-12 rounded-xl bg-dd-100 text-dd-600 flex items-center justify-center"><i class="fa-solid fa-shield-halved"></i></span>
                <div>
                  <div class="text-lg font-bold text-[#141a33]">Anti Double</div>
                  <p class="text-sm text-gray-700">Stok dipindah MASTER → USED saat approve</p>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>

  <section id="cara" class="py-16 bg-gradient-to-br from-dd-50 to-white dark:from-dd-ink dark:to-[#0f1330]">
    <div class="container mx-auto px-4 max-w-6xl">
      <h2 class="text-3xl font-bold text-[#141a33] dark:text-white text-center mb-4">Cara Order di D&D Voucher Digital</h2>
      <p class="text-[#1f2937] dark:text-white/70 text-center mb-12">Empat langkah singkat sampai voucher terkirim</p>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        <div class="flex flex-col items-center text-center gap-3 rounded-2xl bg-white shadow-sm border border-dd-200 px-6 py-7 dark:bg-white/5 dark:border-white/10 dark:shadow-softDark">
          <div class="w-14 h-14 rounded-full bg-gradient-to-br from-dd-600 to-dd-700 text-white flex items-center justify-center text-xl font-bold"><i class="fa-solid fa-pen-to-square"></i></div>
          <h3 class="font-bold text-[#141a33] dark:text-white">1. Isi Data</h3>
          <p class="text-sm text-[#374151] dark:text-white/70">Nama, email, no HP, qty (minimal 12), dan redeem.</p>
        </div>
        <div class="flex flex-col items-center text-center gap-3 rounded-2xl bg-white shadow-sm border border-dd-200 px-6 py-7 dark:bg-white/5 dark:border-white/10 dark:shadow-softDark">
          <div class="w-14 h-14 rounded-full bg-gradient-to-br from-dd-600 to-dd-700 text-white flex items-center justify-center text-xl font-bold"><i class="fa-solid fa-credit-card"></i></div>
          <h3 class="font-bold text-[#141a33] dark:text-white">2. Pilih Payment</h3>
          <p class="text-sm text-[#374151] dark:text-white/70">QRIS (timer aktif) atau transfer bank.</p>
        </div>
        <div class="flex flex-col items-center text-center gap-3 rounded-2xl bg-white shadow-sm border border-dd-200 px-6 py-7 dark:bg-white/5 dark:border-white/10 dark:shadow-softDark">
          <div class="w-14 h-14 rounded-full bg-gradient-to-br from-dd-600 to-dd-700 text-white flex items-center justify-center text-xl font-bold"><i class="fa-solid fa-file-arrow-up"></i></div>
          <h3 class="font-bold text-[#141a33] dark:text-white">3. Upload Bukti</h3>
          <p class="text-sm text-[#374151] dark:text-white/70">Kirim bukti pembayaran langsung dari web.</p>
        </div>
        <div class="flex flex-col items-center text-center gap-3 rounded-2xl bg-white shadow-sm border border-dd-200 px-6 py-7 dark:bg-white/5 dark:border-white/10 dark:shadow-softDark">
          <div class="w-14 h-14 rounded-full bg-gradient-to-br from-dd-600 to-dd-700 text-white flex items-center justify-center text-xl font-bold"><i class="fa-solid fa-paper-plane"></i></div>
          <h3 class="font-bold text-[#141a33] dark:text-white">4. Approve & Kirim</h3>
          <p class="text-sm text-[#374151] dark:text-white/70">Admin verifikasi, voucher dikirim ke email + link web.</p>
        </div>
      </div>
    </div>
  </section>

  <section id="order" class="py-16 bg-white dark:bg-dd-ink">
    <div class="container mx-auto px-4 max-w-6xl">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 items-start">
        <div class="rounded-3xl border border-dd-200 bg-white shadow-soft p-6 dark:bg-white/5 dark:border-white/10 dark:shadow-softDark">
          <div class="flex items-center justify-between gap-3 flex-wrap">
            <h2 class="text-2xl font-bold text-[#141a33] dark:text-white">Order Now</h2>
            <span class="text-xs font-semibold px-3 py-1 rounded-full bg-dd-100 text-dd-700 dark:bg-white/10 dark:text-white/80">Minimal 12 pcs</span>
          </div>
          <p class="text-sm text-gray-600 dark:text-white/70 mt-2">Isi data, buat order, lalu lanjut pembayaran. Tombol order aktif hanya jika qty ≥ 12.</p>

          <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="text-xs font-semibold text-gray-600 dark:text-white/70">Nama</label>
              <input id="nama" class="mt-1 w-full px-4 py-3 rounded-xl border border-dd-200 bg-white outline-none focus:ring-4 focus:ring-dd-100 focus:border-dd-600 dark:bg-white/10 dark:border-white/10 dark:text-white" placeholder="Nama pemesan">
            </div>
            <div>
              <label class="text-xs font-semibold text-gray-600 dark:text-white/70">Email</label>
              <input id="email" type="email" class="mt-1 w-full px-4 py-3 rounded-xl border border-dd-200 bg-white outline-none focus:ring-4 focus:ring-dd-100 focus:border-dd-600 dark:bg-white/10 dark:border-white/10 dark:text-white" placeholder="nama@gmail.com">
            </div>
            <div>
              <label class="text-xs font-semibold text-gray-600 dark:text-white/70">No HP</label>
              <input id="hp" inputmode="tel" class="mt-1 w-full px-4 py-3 rounded-xl border border-dd-200 bg-white outline-none focus:ring-4 focus:ring-dd-100 focus:border-dd-600 dark:bg-white/10 dark:border-white/10 dark:text-white" placeholder="08xxxxxxxxxx">
            </div>
            <div>
              <label class="text-xs font-semibold text-gray-600 dark:text-white/70">Qty Order (min 12)</label>
              <input id="qty" type="number" min="1" step="1" class="mt-1 w-full px-4 py-3 rounded-xl border border-dd-200 bg-white outline-none focus:ring-4 focus:ring-dd-100 focus:border-dd-600 dark:bg-white/10 dark:border-white/10 dark:text-white" placeholder="12">
              <div id="qtyHint" class="mt-2 text-xs text-gray-500 dark:text-white/60">Masukkan qty minimal 12 untuk mengaktifkan tombol order.</div>
            </div>
            <div>
              <label class="text-xs font-semibold text-gray-600 dark:text-white/70">Redeem</label>
              <select id="redeem" class="mt-1 w-full px-4 py-3 rounded-xl border border-dd-200 bg-white outline-none focus:ring-4 focus:ring-dd-100 focus:border-dd-600 dark:bg-white/10 dark:border-white/10 dark:text-white">
                <option value="">Pilih</option><option value="Alfamart">Alfamart</option><option value="Indomaret">Indomaret</option>
              </select>
            </div>
            <div>
              <label class="text-xs font-semibold text-gray-600 dark:text-white/70">Payment</label>
              <select id="payMethod" class="mt-1 w-full px-4 py-3 rounded-xl border border-dd-200 bg-white outline-none focus:ring-4 focus:ring-dd-100 focus:border-dd-600 dark:bg-white/10 dark:border-white/10 dark:text-white">
                <option value="QRIS">QRIS</option><option value="Transfer">Transfer</option>
              </select>
            </div>
          </div>

          <div class="mt-5 flex flex-col gap-3">
            <button id="btnCreate" disabled class="w-full px-6 py-3 rounded-xl bg-gradient-to-r from-dd-600 to-dd-700 text-white font-semibold shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"><i class="fa-solid fa-bolt mr-2"></i>Buat Order</button>
            <button id="btnReset" class="w-full px-6 py-3 rounded-xl border border-dd-200 text-dd-800 font-semibold hover:bg-dd-100 transition-colors dark:border-white/10 dark:text-white dark:hover:bg-white/10">Reset</button>
          </div>

          <div id="payBox" class="mt-6 hidden rounded-2xl border border-dd-200 bg-dd-50 p-4 dark:bg-white/5 dark:border-white/10">
            <div class="flex items-center justify-between gap-3 flex-wrap">
              <div id="payPill" class="text-xs font-semibold px-3 py-2 rounded-full bg-white border border-dd-200 text-dd-800 dark:bg-white/10 dark:border-white/10 dark:text-white/90">Metode: QRIS</div>
              <div class="text-xs font-semibold px-3 py-2 rounded-full bg-white border border-dd-200 text-dd-800 dark:bg-white/10 dark:border-white/10 dark:text-white/90">Timer: <span id="timer" class="font-extrabold">--:--</span></div>
            </div>

            <div id="qrisSection" class="mt-4">
              <p class="text-sm text-gray-600 dark:text-white/70">Scan QRIS dan lakukan pembayaran sebelum timer habis.</p>
              <div class="mt-3 overflow-hidden rounded-2xl border border-dd-200 bg-white dark:bg-white/10 dark:border-white/10">
                <img id="qrisImg" src="" alt="QRIS" class="w-full block">
              </div>
            </div>

            <div id="transferSection" class="mt-4 hidden">
              <p class="text-sm text-gray-600 dark:text-white/70">Transfer ke rekening berikut (contoh). Setelah transfer, upload bukti pembayaran.</p>
              <div class="mt-3 grid grid-cols-1 sm:grid-cols-3 gap-3">
                <div class="rounded-2xl border border-dd-200 bg-white p-3 dark:bg-white/10 dark:border-white/10"><div class="text-xs text-gray-500 dark:text-white/60">Bank</div><div class="font-bold">BCA</div></div>
                <div class="rounded-2xl border border-dd-200 bg-white p-3 dark:bg-white/10 dark:border-white/10"><div class="text-xs text-gray-500 dark:text-white/60">No Rek</div><div class="font-bold">1234567890</div></div>
                <div class="rounded-2xl border border-dd-200 bg-white p-3 dark:bg-white/10 dark:border-white/10"><div class="text-xs text-gray-500 dark:text-white/60">A.N.</div><div class="font-bold">D&D Corp</div></div>
              </div>
            </div>

            <div class="mt-4 rounded-2xl border border-dashed border-dd-200 bg-white p-4 dark:bg-white/5 dark:border-white/10">
              <label class="text-xs font-semibold text-gray-600 dark:text-white/70">Upload bukti pembayaran</label>
              <input id="proof" type="file" accept="image/*" class="mt-2 w-full text-sm file:mr-3 file:py-2 file:px-3 file:rounded-xl file:border-0 file:bg-dd-100 file:text-dd-700 hover:file:bg-dd-200 dark:file:bg-white/10 dark:file:text-white">
              <div class="mt-3">
                <button id="btnSubmit" disabled class="w-full px-6 py-3 rounded-xl border border-dd-200 text-dd-800 font-semibold hover:bg-dd-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed dark:border-white/10 dark:text-white dark:hover:bg-white/10"><i class="fa-solid fa-check mr-2"></i>Konfirmasi Pembayaran</button>
              </div>
              <p id="payHint" class="mt-2 text-xs text-gray-500 dark:text-white/60">Upload bukti pembayaran untuk mengirim konfirmasi.</p>
            </div>
          </div>

          </div>

        <div id="status" class="rounded-3xl border border-dd-200 bg-white shadow-soft p-6 dark:bg-white/5 dark:border-white/10 dark:shadow-softDark">
          <div class="flex items-center justify-between gap-3 flex-wrap">
            <h2 class="text-2xl font-bold text-[#141a33] dark:text-white">Order Summary & Status</h2>
            <a href="https://wa.me/6285774122710?text=Halo%20Admin%2C%20saya%20mau%20order%20voucher%20Frestea%20Blackcurrant%20500ml." target="_blank" class="text-sm font-semibold px-4 py-2 rounded-full bg-dd-100 text-dd-700 hover:bg-dd-200 dark:bg-white/10 dark:text-white dark:hover:bg-white/15"><i class="fa-brands fa-whatsapp mr-2"></i>Hubungi Admin</a>
          </div>
          <p class="text-sm text-gray-600 dark:text-white/70 mt-2">Ringkasan transaksi dan akses voucher (aktif setelah approve).</p>

          <div class="mt-5 grid gap-3">
            <div class="rounded-2xl border border-dd-200 bg-dd-50 p-4 dark:bg-white/5 dark:border-white/10"><div class="text-xs text-gray-500 dark:text-white/60">Order ID</div><div id="vOrderId" class="mt-1 font-extrabold break-all">-</div></div>
            <div class="rounded-2xl border border-dd-200 bg-dd-50 p-4 dark:bg-white/5 dark:border-white/10"><div class="text-xs text-gray-500 dark:text-white/60">Expiration Time</div><div id="vExp" class="mt-1 font-extrabold break-all">-</div></div>
            <div class="rounded-2xl border border-dd-200 bg-dd-50 p-4 dark:bg-white/5 dark:border-white/10"><div class="text-xs text-gray-500 dark:text-white/60">Access Token</div><div id="vTok" class="mt-1 font-extrabold break-all">-</div></div>
          </div>

          <div id="statusBox" class="mt-4 flex items-center gap-3 rounded-2xl border border-dd-200 bg-dd-50 p-4 text-sm text-gray-600 dark:bg-white/5 dark:border-white/10 dark:text-white/70">
            <span id="statusDot" class="h-3 w-3 rounded-full bg-yellow-400"></span>
            <span id="statusText">Idle • Buat order untuk memulai</span>
          </div>

          <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 gap-3">
            <button id="btnCopy" class="px-4 py-3 rounded-xl border border-dd-200 text-dd-800 font-semibold hover:bg-dd-100 transition-colors dark:border-white/10 dark:text-white dark:hover:bg-white/10"><i class="fa-solid fa-link mr-2"></i>Copy Link Download</button>
            <button id="btnOpen" class="px-4 py-3 rounded-xl border border-dd-200 text-dd-800 font-semibold hover:bg-dd-100 transition-colors dark:border-white/10 dark:text-white dark:hover:bg-white/10"><i class="fa-solid fa-download mr-2"></i>Open Download</button>
          </div>

          <div class="mt-6 rounded-2xl border border-dd-200 bg-gradient-to-br from-dd-50 to-white p-5 dark:bg-white/5 dark:border-white/10">
            <div class="flex items-start gap-3">
              <div class="h-11 w-11 rounded-xl bg-dd-100 text-dd-700 flex items-center justify-center dark:bg-white/10 dark:text-white"><i class="fa-solid fa-shield-halved"></i></div>
              <div>
                <div class="font-bold text-[#141a33] dark:text-white">Catatan Delivery</div>
                <p class="text-sm text-gray-600 dark:text-white/70 mt-1">Voucher dikirim ke <b>email</b> dan tersedia via <b>link web</b> setelah admin approve.</p>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>

  <section class="py-16 bg-gradient-to-br from-dd-ink via-[#13183a] to-dd-ink text-white">
    <div class="container mx-auto px-4 max-w-6xl">
      <div class="text-center mb-10">
        <h2 class="text-3xl md:text-4xl font-bold mb-3">Hubungi Admin</h2>
        <p class="text-lg text-white/80">Butuh bantuan cepat? Klik tombol WhatsApp di bawah.</p>
      </div>
      <div class="max-w-3xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-6">
        <a href="https://wa.me/6285774122710?text=Halo%20Admin%2C%20saya%20mau%20order%20voucher%20Frestea%20Blackcurrant%20500ml." target="_blank" class="group p-6 rounded-2xl bg-white/5 border border-white/10 hover:bg-white/10 hover:border-white/20 transition-all">
          <div class="flex items-start gap-4">
            <div class="w-12 h-12 rounded-xl bg-[#25D366] flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform"><i class="fa-brands fa-whatsapp text-white text-2xl"></i></div>
            <div class="flex-1"><h3 class="font-bold text-lg mb-1">WhatsApp Admin</h3><p class="text-sm text-white/70">Tanya order, kirim kendala, atau follow-up verifikasi.</p></div>
            <i class="fa-solid fa-arrow-right text-white/50 group-hover:text-white group-hover:translate-x-1 transition-all"></i>
          </div>
        </a>
        <a href="#order" class="group p-6 rounded-2xl bg-white/5 border border-white/10 hover:bg-white/10 hover:border-white/20 transition-all">
          <div class="flex items-start gap-4">
            <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-dd-600 to-dd-700 flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform"><i class="fa-solid fa-bolt text-white text-xl"></i></div>
            <div class="flex-1"><h3 class="font-bold text-lg mb-1">Order via Web</h3><p class="text-sm text-white/70">Isi data, bayar, upload bukti, lalu tunggu approve.</p></div>
            <i class="fa-solid fa-arrow-right text-white/50 group-hover:text-white group-hover:translate-x-1 transition-all"></i>
          </div>
        </a>
      </div>
    </div>
  </section>
</main>

<footer class="bg-dd-ink text-white pt-8 pb-28 md:py-8 border-t border-white/10">
  <div class="container mx-auto px-4 text-center">
    <p class="text-sm text-white/60">© 2026 Digital Voucher Platform. All rights reserved.</p>
    <p class="text-xs text-white/40 mt-2">Powered by D&D Corp</p>
  </div>
</footer>

<nav class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg md:hidden z-50 dark:bg-dd-ink dark:border-white/10">
  <div class="flex justify-around">
    <a class="flex-1 flex flex-col items-center justify-center py-3 px-2 transition-colors text-dd-600 bg-dd-50 dark:text-white dark:bg-white/10" href="#home"><i class="fa-solid fa-house text-xl mb-1"></i><span class="text-xs font-medium text-center">Beranda</span></a>
    <a class="flex-1 flex flex-col items-center justify-center py-3 px-2 transition-colors text-gray-600 hover:text-gray-900 dark:text-white/70 dark:hover:text-white" href="#cara"><i class="fa-solid fa-list-check text-xl mb-1"></i><span class="text-xs font-medium text-center">Cara</span></a>
    <a class="flex-1 flex flex-col items-center justify-center py-3 px-2 transition-colors text-gray-600 hover:text-gray-900 dark:text-white/70 dark:hover:text-white" href="#order"><i class="fa-solid fa-bolt text-xl mb-1"></i><span class="text-xs font-medium text-center">Order</span></a>
    <a class="flex-1 flex flex-col items-center justify-center py-3 px-2 transition-colors text-gray-600 hover:text-gray-900 dark:text-white/70 dark:hover:text-white" href="https://wa.me/6285774122710?text=Halo%20Admin%2C%20saya%20mau%20order%20voucher%20Frestea%20Blackcurrant%20500ml." target="_blank"><i class="fa-brands fa-whatsapp text-xl mb-1"></i><span class="text-xs font-medium text-center">Admin</span></a>
  </div>
</nav>

<a href="https://wa.me/6285774122710?text=Halo%20Admin%2C%20saya%20mau%20order%20voucher%20Frestea%20Blackcurrant%20500ml." target="_blank" class="fixed bottom-24 right-4 md:bottom-6 md:right-6 z-50 flex items-center gap-2 px-4 py-3 rounded-2xl bg-[#25D366] text-white font-semibold shadow-lg hover:scale-[1.02] transition-transform">
  <i class="fa-brands fa-whatsapp text-xl"></i><span class="hidden sm:inline">Hubungi Admin</span>
</a>

<div id="toast" class="fixed left-1/2 -translate-x-1/2 bottom-28 md:bottom-8 hidden z-50 px-4 py-3 rounded-2xl bg-black/80 text-white text-sm border border-white/10 backdrop-blur">Toast</div>

<script>
  const GAS_WEBAPP_URL = "https://script.google.com/macros/s/AKfycbwL7Bw6iX14lJ9kl90vB8Ilm0X_KUhjPjHVB9fM5YNk8rKcU1DNdweUolAf-Qd-w1cBng/exec";
  const $ = (id) => document.getElementById(id);
  let STATE = { order_id:null, token:null, expired_at:null, qris_image:null, timerInt:null };

  function showToast(msg){
    const t = $("toast");
    t.textContent = msg;
    t.classList.remove("hidden");
    clearTimeout(window.__t);
    window.__t = setTimeout(()=>t.classList.add("hidden"), 3200);
  }

  function setTheme(mode){
    const root = document.documentElement;
    if(mode==="dark") root.classList.add("dark"); else root.classList.remove("dark");
    try{ localStorage.setItem("dd_theme", mode); }catch(e){}
  }
  function initTheme(){
    let mode = "dark";
    try{ mode = localStorage.getItem("dd_theme") || "dark"; }catch(e){}
    setTheme(mode);
  }
  function toggleTheme(){ setTheme(document.documentElement.classList.contains("dark") ? "light" : "dark"); }
  $("themeBtn")?.addEventListener("click", toggleTheme);
  $("themeBtnMobile")?.addEventListener("click", toggleTheme);

  function validateQty(){
    const q = parseInt($("qty").value || "0", 10);
    const ok = q >= 12;
    $("btnCreate").disabled = !ok;
    $("qtyHint").textContent = ok ? "Qty valid. Tombol order sudah aktif." : "Masukkan qty minimal 12 untuk mengaktifkan tombol order.";
    return ok;
  }
  $("qty").addEventListener("input", validateQty);

  function validateBasic(){
    const nama = $("nama").value.trim();
    const email = $("email").value.trim();
    const hp = $("hp").value.trim();
    const redeem = $("redeem").value.trim();
    if(!nama) return "Nama wajib diisi.";
    if(!email || !email.includes("@")) return "Email wajib & harus benar.";
    if(!hp || hp.length < 9) return "No HP wajib & minimal 9 digit.";
    if(!redeem) return "Pilih redeem (Alfamart/Indomaret).";
    if(!validateQty()) return "Qty minimal 12.";
    return null;
  }

  async function postJSON(payload){
    const res = await fetch(GAS_WEBAPP_URL, { method:"POST", headers:{"Content-Type":"application/json"}, body:JSON.stringify(payload) });
    return await res.json();
  }

  function setStatus(kind, text){
    const dot = $("statusDot");
    dot.className = "h-3 w-3 rounded-full " + (kind==="good" ? "bg-green-500" : kind==="bad" ? "bg-red-500" : "bg-yellow-400");
    $("statusText").textContent = text;
  }

  function setSummary(){
    $("vOrderId").textContent = STATE.order_id || "-";
    $("vTok").textContent = STATE.token ? (STATE.token.slice(0,12) + "…") : "-";
    $("vExp").textContent = STATE.expired_at ? new Date(STATE.expired_at).toLocaleString("id-ID") : "-";
  }

  function syncPaymentUI(){
    const m = $("payMethod").value;
    $("payPill").textContent = "Metode: " + m;
    $("qrisSection").classList.toggle("hidden", m !== "QRIS");
    $("transferSection").classList.toggle("hidden", m !== "Transfer");
  }
  $("payMethod").addEventListener("change", syncPaymentUI);

  $("proof").addEventListener("change", () => {
    const file = $("proof").files?.[0];
    $("btnSubmit").disabled = !file || !STATE.order_id;
  });

  function startTimer(){
    clearInterval(STATE.timerInt);
    const end = new Date(STATE.expired_at).getTime();
    function tick(){
      const diff = end - Date.now();
      if(diff <= 0){
        $("timer").textContent = "00:00";
        setStatus("bad","Expired • Buat order baru");
        $("btnSubmit").disabled = true;
        showToast("Waktu pembayaran habis. Order expired.");
        clearInterval(STATE.timerInt);
        return;
      }
      const mm = String(Math.floor(diff/60000)).padStart(2,"0");
      const ss = String(Math.floor((diff%60000)/1000)).padStart(2,"0");
      $("timer").textContent = mm + ":" + ss;
    }
    tick();
    STATE.timerInt = setInterval(tick, 1000);
  }

  async function createOrder(){
    const err = validateBasic();
    if(err){ showToast(err); return; }
    try{
      $("btnCreate").disabled = true;
      setStatus("warn","Processing • Membuat order...");
      showToast("Membuat order...");

      const payload = {
        action:"createOrder",
        nama:$("nama").value.trim(),
        email:$("email").value.trim(),
        redeem:$("redeem").value.trim(),
        metode:$("payMethod").value.trim(),
        hp:$("hp").value.trim(),
        qty:parseInt($("qty").value,10)
      };

      const data = await postJSON(payload);
      if(!data.ok){
        setStatus("bad","Failed • Gagal membuat order");
        showToast("Gagal: " + (data.error || "unknown"));
        validateQty();
        return;
      }

      STATE.order_id = data.order_id;
      STATE.token = data.token;
      STATE.expired_at = data.expired_at;
      STATE.qris_image = data.qris_image;

      setSummary();
      setStatus("warn","Pending Payment • Silakan bayar sesuai metode");

      $("payBox").classList.remove("hidden");
      syncPaymentUI();
      if(STATE.qris_image) $("qrisImg").src = STATE.qris_image;

      startTimer();
      $("btnSubmit").disabled = true;
      $("payHint").textContent = "Upload bukti pembayaran, lalu klik Konfirmasi Pembayaran.";
      showToast("Order dibuat. Lanjut pembayaran.");
    } catch(e) {
      setStatus("bad","Error • Tidak bisa akses backend");
      showToast("Error backend.");
      validateQty();
    }
  }

  function fileToBase64(file){
    return new Promise((resolve,reject)=>{
      const r = new FileReader();
      r.onload = ()=>resolve(r.result);
      r.onerror = reject;
      r.readAsDataURL(file);
    });
  }

  async function submitPayment(){
    if(!STATE.order_id){ showToast("Buat order dulu."); return; }
    const file = $("proof").files?.[0];
    if(!file){ showToast("Upload bukti dulu."); return; }
    if(Date.now() > new Date(STATE.expired_at).getTime()){ showToast("Order sudah expired."); return; }
    try{
      $("btnSubmit").disabled = true;
      setStatus("warn","Waiting Verification • Bukti terkirim");
      showToast("Mengirim bukti...");

      const base64 = await fileToBase64(file);
      const payload = { action:"submitPayment", order_id:STATE.order_id, bukti_base64:base64 };

      const data = await postJSON(payload);
      if(!data.ok){
        setStatus("bad","Failed • Bukti gagal terkirim");
        showToast("Gagal: " + (data.error || "unknown"));
        $("btnSubmit").disabled = false;
        return;
      }

      setStatus("warn","Waiting Approval • Admin verifikasi");
      $("payHint").textContent = "Konfirmasi terkirim. Tunggu approve admin. Voucher akan dikirim ke email + link download.";
      showToast("Bukti terkirim. Menunggu verifikasi.");
    } catch(e) {
      setStatus("bad","Error • Submit gagal");
      showToast("Submit error.");
      $("btnSubmit").disabled = false;
    }
  }

  function downloadUrl(){
    if(!STATE.token) return null;
    return GAS_WEBAPP_URL + "?token=" + encodeURIComponent(STATE.token);
  }

  async function copyDownload(){
    const url = downloadUrl();
    if(!url){ showToast("Belum ada token."); return; }
    try{ await navigator.clipboard.writeText(url); showToast("Link download dicopy."); }
    catch(e){ showToast("Clipboard gagal. Copy manual dari token."); }
  }

  function openDownload(){
    const url = downloadUrl();
    if(!url){ showToast("Belum ada token."); return; }
    window.open(url, "_blank");
  }

  function resetAll(){
    clearInterval(STATE.timerInt);
    STATE = { order_id:null, token:null, expired_at:null, qris_image:null, timerInt:null };
    $("payBox").classList.add("hidden");
    $("proof").value = "";
    $("btnSubmit").disabled = true;
    setSummary();
    setStatus("warn","Idle • Buat order untuk memulai");
    validateQty();
    showToast("Reset selesai.");
  }

  $("btnCreate").addEventListener("click", createOrder);
  $("btnSubmit").addEventListener("click", submitPayment);
  $("btnReset").addEventListener("click", resetAll);
  $("btnCopy").addEventListener("click", copyDownload);
  $("btnOpen").addEventListener("click", openDownload);

  initTheme();
  validateQty();
  syncPaymentUI();
  setSummary();
  setStatus("warn","Idle • Buat order untuk memulai");
</script>
</body>
</html>
